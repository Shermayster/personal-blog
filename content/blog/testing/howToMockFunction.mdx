---
title: How to mock a function with Jest
---

Usually we want to test our code functionality without implementation details, and tests should be mostly integrational.
But sometimes it's imposible to do and we need to mock our functions.
Let's see how to do it with Jest.

For example we have util file with helper function and need to mock 'firstUtilFunction' function for our test.
Our code is not calling this function directly.

```javascript
// utils.js
export firstUtilFunction() {
    return 'useful calculation'
}

export secondUtilFunction() {
    return 'another useful calculation'
}
```

```javascript
// index.js
import { firstUtilFunction } from "./utils.js"

export function thisFunctionShouldBeTested() {
  const calculations = firstUtilFunction()
  if (calculation === "useful calculation") {
    return "calculated"
  }
  if (calculation === "not useful calculation") {
    return "oh no"
  }
}
```

```javascript
//test.js
import { thisFunctionShouldBeTested } from "./"

test("functionality should work!", () => {
  const result = thisFunctionShouldBeTested()
})
```

We want to test all possible responses. How we can do it?

first we can import our util file as module

```javascript
import * as utils from "./utils"
```

now we can mock our function

```javascript
//test.js
import * as utils from "./utils"
import { thisFunctionShouldBeTested } from "./"

test("functionality should work!", () => {
  jest.spyOn(utils, 'firstUtilFunction').mockImplementationOnce(() => "not useful calculation");
  const result = thisFunctionShouldBeTested()
})
```

```

```
